{"version":3,"sources":["webpack:///../src/index.js","webpack:///./src/pages/index.js","webpack:///./src/components/Layout.js"],"names":["modifiers","preventOverflow","boundariesElement","padding","Texty","state","isHovered","renderTooltip","_ref","ref","style","placement","arrowProps","_this$props","_this","props","children","container","tooltip","tooltipClassName","tooltipStyle","tooltipMaxWidth","arrowClassName","hideArrow","content","extraStyle","Object","assign","maxWidth","ReactDom","createPortal","react_default","a","createElement","data-texty-tooltip","className","onClick","handleMouseEvent","onDoubleClick","onContextMenu","onMouseDown","onMouseUp","data-texty-arrow","targetNode","ownerDocument","body","setTargetRef","innerRef","e","stopPropagation","handleScroll","setState","handleMouseEnter","_this$props2","showDelay","onMouseEnter","_clearHideTimer","showTimer","setTimeout","handleMouseLeave","_this$props3","hideDelay","onMouseLeave","_clearShowTimer","hideTimer","componentDidUpdate","_this2","this","window","addEventListener","listenTimer","_clearListenTimer","removeEventListener","componentWillUnmount","render","_this$props4","Tag","tagName","rest","_objectWithoutPropertiesLoose","data-texty","target","isTruncated","scrollWidth","offsetWidth","showTooltip","esm","referenceElement","clearTimeout","React","Component","defaultProps","Page","Layout","src","href","color","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_helmet__WEBPACK_IMPORTED_MODULE_1__","react_helmet__WEBPACK_IMPORTED_MODULE_1___default","react_github_corner__WEBPACK_IMPORTED_MODULE_2__","react_github_corner__WEBPACK_IMPORTED_MODULE_2___default","Fragment","title","meta","name","size","bannerColor"],"mappings":"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","file":"component---src-pages-index-js-b6e2ec75153a72e6c4a8.js","sourcesContent":["import React from 'react'\nimport ReactDom from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { Popper } from 'react-popper'\n\nconst modifiers = {\n  preventOverflow: {\n    boundariesElement: 'viewport',\n    padding: 10,\n  },\n}\n\n/**\n * Text component with tooltip support powered by Popper\n */\nclass Texty extends React.Component {\n  state = {\n    isHovered: false,\n  }\n\n  componentDidUpdate() {\n    if (this.state.isHovered) {\n      window.addEventListener('scroll', this.handleScroll, true)\n      // react-virtualized-auto-sizer would trigger scroll events after tooltip shown in some case, we have to skip those scroll events\n      this.listenTimer = setTimeout(() => {\n        window.addEventListener('scroll', this.handleScroll, true)\n        delete this.listenTimer\n      }, 50)\n    } else {\n      this._clearListenTimer()\n      window.removeEventListener('scroll', this.handleScroll, true)\n    }\n  }\n\n  componentWillUnmount() {\n    this._clearListenTimer()\n    window.removeEventListener('scroll', this.handleScroll, true)\n    this._clearShowTimer()\n    this._clearHideTimer()\n  }\n\n  render() {\n    /* eslint-disable no-unused-vars */\n    const {\n      tagName: Tag,\n      children,\n      placement,\n      // omit the following from rest\n      innerRef,\n      showDelay,\n      hideDelay,\n      tooltip,\n      tooltipClassName,\n      tooltipStyle,\n      tooltipMaxWidth,\n      hideArrow,\n      container,\n      ...rest\n    } = this.props\n    /* eslint-enable no-unused-vars */\n\n    if (!children) {\n      return <Tag {...rest} ref={this.setTargetRef} data-texty={false} />\n    }\n\n    const target = this.targetNode\n    const isTruncated = !!target && target.scrollWidth > target.offsetWidth\n    const showTooltip = this.state.isHovered && isTruncated\n    return (\n      <Tag\n        {...rest}\n        ref={this.setTargetRef}\n        data-texty={showTooltip}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n      >\n        {children}\n        {showTooltip && (\n          <Popper\n            referenceElement={target}\n            placement={placement}\n            modifiers={modifiers}\n          >\n            {this.renderTooltip}\n          </Popper>\n        )}\n      </Tag>\n    )\n  }\n\n  renderTooltip = ({ ref, style, placement, arrowProps }) => {\n    const {\n      children,\n      container,\n      tooltip,\n      tooltipClassName,\n      tooltipStyle,\n      tooltipMaxWidth,\n      arrowClassName,\n      hideArrow,\n    } = this.props\n\n    const content = tooltip || children\n    const extraStyle = tooltipMaxWidth\n      ? { ...tooltipStyle, maxWidth: tooltipMaxWidth }\n      : tooltipStyle\n    return ReactDom.createPortal(\n      <div\n        ref={ref}\n        data-texty-tooltip={placement}\n        className={tooltipClassName}\n        style={extraStyle ? { ...style, ...extraStyle } : style}\n        onClick={this.handleMouseEvent}\n        onDoubleClick={this.handleMouseEvent}\n        onContextMenu={this.handleMouseEvent}\n        onMouseDown={this.handleMouseEvent}\n        onMouseUp={this.handleMouseEvent}\n      >\n        {content}\n        {!hideArrow && (\n          <div\n            ref={arrowProps.ref}\n            data-texty-arrow={placement}\n            className={arrowClassName}\n            style={arrowProps.style}\n          />\n        )}\n      </div>,\n      container || this.targetNode.ownerDocument.body\n    )\n  }\n\n  setTargetRef = ref => {\n    this.props.innerRef && this.props.innerRef(ref)\n    this.targetNode = ref\n  }\n\n  handleMouseEvent = e => {\n    e.stopPropagation()\n  }\n\n  handleScroll = e => {\n    this.setState({ isHovered: false })\n  }\n\n  _clearListenTimer() {\n    if (this.listenTimer) {\n      clearTimeout(this.listenTimer)\n      delete this.listenTimer\n    }\n  }\n\n  _clearShowTimer() {\n    if (this.showTimer) {\n      clearTimeout(this.showTimer)\n      delete this.showTimer\n    }\n  }\n\n  _clearHideTimer() {\n    if (this.hideTimer) {\n      clearTimeout(this.hideTimer)\n      delete this.hideTimer\n    }\n  }\n\n  handleMouseEnter = e => {\n    // eslint-disable-next-line react/prop-types\n    const { showDelay, onMouseEnter } = this.props\n    onMouseEnter && onMouseEnter(e)\n\n    this._clearHideTimer()\n\n    if (!showDelay) {\n      this.setState({ isHovered: true })\n      return\n    }\n\n    this.showTimer = setTimeout(() => {\n      this.setState({ isHovered: true })\n      delete this.showTimer\n    }, showDelay)\n  }\n\n  handleMouseLeave = e => {\n    // eslint-disable-next-line react/prop-types\n    const { hideDelay, onMouseLeave } = this.props\n    onMouseLeave && onMouseLeave(e)\n\n    this._clearShowTimer()\n\n    const { isHovered } = this.state\n    if (!isHovered) return\n\n    if (!hideDelay) {\n      this.setState({ isHovered: false })\n      return\n    }\n\n    this.hideTimer = setTimeout(() => {\n      this.setState({ isHovered: false })\n      delete this.hideTimer\n    }, hideDelay)\n  }\n}\n\nTexty.defaultProps = {\n  tagName: 'div',\n  showDelay: 150,\n  hideDelay: 150,\n  hideArrow: false,\n  placement: 'top',\n}\n\nTexty.propTypes = {\n  /**\n   * Get inner ref of the component\n   */\n  innerRef: PropTypes.func,\n  /**\n   * Tag name for the component\n   */\n  tagName: PropTypes.string,\n  /**\n   * Should be string or inline element\n   */\n  children: PropTypes.node,\n  /**\n   * Tooltip for the truncated text if set, or the children will be used\n   */\n  tooltip: PropTypes.node,\n  /**\n   * Classname for the tooltip\n   */\n  tooltipClassName: PropTypes.string,\n  /**\n   * Custom style of the tooltip\n   */\n  tooltipStyle: PropTypes.object,\n  /**\n   * Max width of the tooltip\n   */\n  tooltipMaxWidth: PropTypes.number,\n  /**\n   * Delay milliseconds to show when mouse enter\n   */\n  showDelay: PropTypes.number,\n  /**\n   * Delay milliseconds to hide when mouse leave\n   */\n  hideDelay: PropTypes.number,\n  /**\n   * Classname for the arrow\n   */\n  arrowClassName: PropTypes.string,\n  /**\n   * Whether to show the tooltip arrow\n   */\n  hideArrow: PropTypes.bool,\n  /**\n   * The placement of the tooltip\n   */\n  placement: PropTypes.oneOf([\n    'top',\n    'top-start',\n    'top-end',\n    'bottom',\n    'bottom-start',\n    'bottom-end',\n  ]),\n  /**\n   * The HTML Element to append the tooltip **In most cases you don't need to set it manually**\n   */\n  container: PropTypes.instanceOf(\n    typeof Element !== 'undefined' ? Element : Object\n  ),\n}\n\nexport default Texty\n","import React from 'react'\nimport Text from 'react-texty'\n\nimport Layout from '../components/Layout'\n\nconst Page = () => (\n  <Layout>\n    <h1>react-texty</h1>\n    <Text>I'm not truncated so there is no tooltip.</Text>\n    <Text>I'm too long to show, so there is tooltip for the full content.</Text>\n    <Text tagName=\"a\" href=\"/\">\n      <b>tagName=\"a\": </b>I'm too long to show, so there is tooltip for the full\n      content.\n    </Text>\n    <Text tooltip=\"react-texty\">\n      <b>tooltip=\"react-texty\": </b>I'm too long to show, so there is tooltip for the\n      full content.\n    </Text>\n    <Text tooltipClassName=\"steelblue\">\n      <b>tooltipClassName: </b>I'm too long to show, so there is tooltip for the\n      full content.\n    </Text>\n    <Text tooltipStyle={{ color: 'red' }}>\n      <b>tooltipStyle={`{ color: 'red' }`}: </b>I'm too long to show, so there is\n      tooltip for the full content.\n    </Text>\n    <Text tooltipMaxWidth={300}>\n      <b>tooltipMaxWidth=300: </b>I'm too long to show, so there is\n      tooltip for the full content.\n    </Text>\n    <Text showDelay={1000}>\n      <b>showDelay=1000: </b>I'm too long to show, so there is tooltip for the\n      full content.\n    </Text>\n    <Text hideDelay={1000}>\n      <b>hideDelay=1000: </b>I'm too long to show, so there is tooltip for the\n      full content.\n    </Text>\n    <Text hideArrow>\n      <b>hideArrow: </b>I'm too long to show, so there is tooltip for the full\n      content.\n    </Text>\n    <Text placement=\"bottom\">\n      <b>placement=\"bottom\": </b>I'm too long to show, so there is tooltip for\n      the full content.\n    </Text>\n    <Text placement=\"bottom-start\">\n      <b>placement=\"bottom-start\": </b>I'm too long to show, so there is tooltip\n      for the full content.\n    </Text>\n    <Text placement=\"bottom-end\">\n      <b>placement=\"bottom-end\": </b>I'm too long to show, so there is tooltip\n      for the full content.\n    </Text>\n  </Layout>\n)\n\nexport default Page\n","import React from 'react'\nimport Helmet from 'react-helmet'\nimport GithubCorner from 'react-github-corner'\n\nimport '../styles/index.css'\n\nconst Layout = ({ children }) => (\n  <>\n    <Helmet\n      title=\"react-texty\"\n      meta={[\n        {\n          name: 'description',\n          content:\n            \"A straight forward text component with tooltip support when it's truncated\",\n        },\n        {\n          name: 'keywords',\n          content: 'react, component, text, ellipsis, tooltip',\n        },\n        {\n          name: 'author',\n          content: 'Neo Nie<nihgwu@live.com>',\n        },\n      ]}\n    />\n    <GithubCorner\n      href=\"https://github.com/nihgwu/react-texty\"\n      size={100}\n      bannerColor=\"#222\"\n    />\n    <div className=\"content\">{children}</div>\n  </>\n)\n\nexport default Layout\n"],"sourceRoot":""}